<HTML>
<HEAD>
<TITLE>18116004/</TITLE>
</HEAD>
<BODY BGCOLOR=white>
<HR>
18116039/<p><PRE>
&gt;&gt;&gt;&gt; file: solution_1.v
`timescale 1ns / 1ps
module fifo( Clk,w_data,r_data,rd,wr,reset,empty,full ); 
input   reset,Clk,rd,wr;
output  empty,full;
input   [7:0]  w_data  ;
output reg [7:0] r_data ;
reg [2:0]  c = 0; 
reg [7:0] fifo [0:7]; 
reg [2:0]  readCounter = 0, writeCounter = 0; 
assign empty = (c==0)? 1'b1:1'b0; 
assign full = (c==1 || c==-7)? 1'b1:1'b0; 
always @ (posedge Clk) 
begin 
if (reset) begin 
readCounter = 0; 
writeCounter = 0; 
end
else if (rd==1'b1 && empty !=1) begin 
r_data = fifo[readCounter]; 
readCounter = readCounter+1;
readCounter = readCounter%8; 
end 
else if (wr==1'b1 && full != 1) begin
   fifo[writeCounter]  = w_data; 
   writeCounter  = writeCounter+1; 
   writeCounter = writeCounter % 8;
end 
else
begin
c=readCounter-writeCounter; 
end 
end 
endmodule


&gt;&gt;&gt;&gt; file: tb_1.v
`timescale 1ns / 1ps
module fifo_tb;
reg Clk;
reg[7:0] w_data;
reg rd;
reg wr;
reg reset;
<A NAME="0"></A><FONT color = #FF0000><A HREF="match148-0.html#0" TARGET="0"><IMG SRC="../../bitmaps/tm_0_13.gif" ALT="other" BORDER="0" ALIGN=left></A>

wire[7:0] r_data;
wire empty;
wire full;
fifo uut(Clk, w_data, r_data,rd, wr, reset,empty, full);
 initial begin
Clk  = 1'b0;
w_data = 8'h0;
 rd = 1'b0;
wr = 1'b0;
</FONT>reset = 1'b1;
 #100;        
reset  = 1'b1;
 #15;
reset = 1'b0;
wr  = 1'b1;
w_data = 8'h0;
 #15;
  w_data = 8'h1;
 #15;
  w_data = 8'h2;
 #15;
w_data = 8'h3;
    #15;
 w_data = 8'h4;
    #15;
  wr = 1'b0;
  rd= 1'b1;  
end 
 always #10 Clk = ~Clk;    
endmodule


</PRE>
</PRE>
</BODY>
</HTML>
