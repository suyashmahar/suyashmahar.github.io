<HTML>
<HEAD>
<TITLE>18116023/</TITLE>
</HEAD>
<BODY BGCOLOR=white>
<HR>
18116039/<p><PRE>
&gt;&gt;&gt;&gt; file: solution_1.v
`timescale 1ns / 1ps
<A NAME="2"></A><FONT color = #0000FF><A HREF="match48-0.html#2" TARGET="0"><IMG SRC="../../bitmaps/tm_2_9.gif" ALT="other" BORDER="0" ALIGN=left></A>

module fifo( Clk,w_data,r_data,rd,wr,reset,empty,full ); 
input   reset,Clk,rd,wr;
output  empty,full;
input   [7:0]  w_data  ;
output reg [7:0] r_data ;
</FONT>reg [2:0]  c = 0; 
reg [7:0] fifo [0:7]; 
<A NAME="4"></A><FONT color = #FF00FF><A HREF="match48-0.html#4" TARGET="0"><IMG SRC="../../bitmaps/tm_4_7.gif" ALT="other" BORDER="0" ALIGN=left></A>

reg [2:0]  readCounter = 0, writeCounter = 0; 
assign empty = (c==0)? 1'b1:1'b0; 
assign full = (c==1 || c==-7)? 1'b1:1'b0; 
</FONT><A NAME="1"></A><FONT color = #00FF00><A HREF="match48-0.html#1" TARGET="0"><IMG SRC="../../bitmaps/tm_1_12.gif" ALT="other" BORDER="0" ALIGN=left></A>

always @ (posedge Clk) 
begin 
if (reset) begin 
readCounter = 0; 
writeCounter = 0; 
end
else if (rd==1'b1 && empty !=1) begin 
r_data = fifo[readCounter]; 
readCounter = readCounter+1;
</FONT>readCounter = readCounter%8; 
end 
else if (wr==1'b1 && full != 1) begin
   fifo[writeCounter]  = w_data; 
   writeCounter  = writeCounter+1; 
   writeCounter = writeCounter % 8;
end 
else
begin
c=readCounter-writeCounter; 
end 
end 
endmodule


&gt;&gt;&gt;&gt; file: tb_1.v
<A NAME="3"></A><FONT color = #00FFFF><A HREF="match48-0.html#3" TARGET="0"><IMG SRC="../../bitmaps/tm_3_9.gif" ALT="other" BORDER="0" ALIGN=left></A>

`timescale 1ns / 1ps
module fifo_tb;
reg Clk;
reg[7:0] w_data;
reg rd;
reg wr;
reg reset;
wire[7:0] r_data;
wire empty;
wire full;
fifo uut(Clk, w_data, r_data,rd, wr, reset,empty, full);
</FONT> initial begin
Clk  = 1'b0;
<A NAME="0"></A><FONT color = #FF0000><A HREF="match48-0.html#0" TARGET="0"><IMG SRC="../../bitmaps/tm_0_13.gif" ALT="other" BORDER="0" ALIGN=left></A>

w_data = 8'h0;
 rd = 1'b0;
wr = 1'b0;
reset = 1'b1;
 #100;        
reset  = 1'b1;
 #15;
reset = 1'b0;
wr  = 1'b1;
w_data = 8'h0;
 #15;
  w_data = 8'h1;
</FONT> #15;
  w_data = 8'h2;
 #15;
w_data = 8'h3;
<A NAME="5"></A><FONT color = #FF0000><A HREF="match48-0.html#5" TARGET="0"><IMG SRC="../../bitmaps/tm_0_6.gif" ALT="other" BORDER="0" ALIGN=left></A>

    #15;
 w_data = 8'h4;
    #15;
  wr = 1'b0;
  rd= 1'b1;  
end 
 always #10 Clk = ~Clk;    
</FONT>endmodule


</PRE>
</PRE>
</BODY>
</HTML>
